<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../style.css">
    <script type="module" src="esp-web-tools/install-button.js?module"></script>
    <title>JazzLights Web Install</title>
    <meta property="og:title" content="JazzLights Web Install" />
    <meta property="og:site_name" content="JazzLights" />
    <meta property="og:type" content="website" />
    <meta property="og:description" content="Install JazzLights from the Web." />
</head>
<body>
    <h1>JazzLights Web Install</h1>
    <p>
        Press the Install button to install
        <a href="https://davidschinazi.github.io/jazzlights/">JazzLights</a>
        on your connected device.
    </p>
    <p>
        If you're unsure which port to use, start with the device unplugged
        and then click the Install button before plugging in the device to see
        which new port appears after it's plugged in.
    </p>
    <h4>Select the device you want to install:</h2>
    <div class="hardware-buttons">
      <label>
        <input type="radio" name="hardware" onchange="onButtonClicked()" value="vest" checked />
        Vest
      </label>
      <label>
        <input type="radio" name="hardware" onchange="onButtonClicked()" value="shoe" />
        Shoe
      </label>
      <label>
        <input type="radio" name="hardware" onchange="onButtonClicked()" value="hat" />
        Hat
      </label>
      <label>
        <input type="radio" name="hardware" onchange="onButtonClicked()" value="creature" />
        Creature
      </label>
    </div>
    <esp-web-install-button manifest="manifest-vest.json">
        <button slot="activate">Install</button>
        <span slot="unsupported">
            Your browser doesn't support installing software on ESP devices.
            Use a Chromium-based browser such as Google Chrome or Microsoft Edge.
        </span>
    </esp-web-install-button>
    <p>
        Powered by
        <a href="https://esphome.github.io/esp-web-tools/" target="_blank">
            ESP Web Tools
        </a>.
    </p>
<script>
    function onButtonClicked() {
        const installButton = document.querySelector("esp-web-install-button");
        const hardware = document.querySelector('input[name="hardware"]:checked').value;
        installButton.manifest = `manifest-${hardware}.json`;
    }
</script>
</body>
</html>
