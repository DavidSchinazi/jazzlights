pcm.df_audio {
  type asym
  playback.pcm "df_dup_output"
  capture.pcm "df_dup_input"
}

pcm.df_dup_output {
  type plug
  slave.pcm df_output_mdev
  route_policy "duplicate"
}

pcm.df_dup_input {
  type hw
  card "Loopback"
  device 0
  subdevice 0
}

pcm.df_output_mdev {
  type multi
  slaves.a.pcm pcm.df_real_device
  slaves.a.channels 2
  slaves.b.pcm pcm.df_loopback
  slaves.b.channels 2
  bindings.0.slave a
  bindings.0.channel 0
  bindings.1.slave a
  bindings.1.channel 1
  bindings.2.slave b
  bindings.2.channel 0
  bindings.3.slave b
  bindings.3.channel 1
}

#pcm.df_output_both {
#  type route
#  slave.pcm {
#      type multi
#      slaves.a.pcm "df_real_device"
#      slaves.b.pcm "df_loopback"
#      slaves.a.channels 2
#      slaves.b.channels 2
#      bindings.0.slave a
#      bindings.0.channel 0
#      bindings.1.slave a
#      bindings.1.channel 1
#      bindings.2.slave b
#      bindings.2.channel 0
#      bindings.3.slave b
#      bindings.3.channel 1
#  }
#
#  ttable.0.0 1
#  ttable.1.1 1
#}

pcm.df_real_device {
  type dmix
  ipc_key 1024
  slave {
    pcm "hw:10"
    channels 2
    rate 48000
    periods 128
    period_time 0
    period_size 1024
    buffer_size 65536
  }
}

pcm.df_loopback {
  type plug
  slave.pcm "df_real_loopback"
}

pcm.df_real_loopback {
  type dmix
  ipc_key 1025
  slave {
    pcm "hw:11"
    channels 2
    rate 48000
    periods 128
    period_time 0
    period_size 1024
    buffer_size 65536
  }
}

